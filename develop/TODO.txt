######################################################################
# List of things to fix or items for additional implementation.
#
# $Date$
######################################################################


#======================================================================
#======================================================================
# general
#======================================================================
#======================================================================

#Open
06/09/2014 implement "as.one=TRUE" for stsplot_time (see plot.disProg)

#Done
21/04/2011 incorporate a NAMESPACE :) (as of R 2.14.0 this is obligatory)
19/06/2012 move vignettes into a vignettes directory or create .Rinstignore
           (as of R 2.14.0 the preferred location for vignette sources is
            directory "vignettes" and not "inst/doc")
18/04/2013 Author@R field in the "DESCRIPTION" file.
10/05/2014 plot for sts objects which contains daily data as Date obj
07/09/2014 add a "units" argument to stsplot_time with default 1:nAreas



#======================================================================
#======================================================================
# twinSIR
#======================================================================
#======================================================================

########
# Bugs
########

#Open

#Fixed
25/03/2011 intensityPlot in twinSIR does not work if there are initially
           infectious individuals (as in the hagelloch data)
07/08/2012 simulation does not work on the fitted Hagelloch data. More
           specifically, it does not work when there are no endemic covariates.
01/09/2014 osAIC computation by simulation does not work in some
           cases where estimated coefficient is small (global in Hagelloch):
           m <- twinSIR(~ household + local + global, data=hagelloch)
           AIC(m, nsim=10)   # sometimes this works, sometimes not (-> NA)
           Problems occur in the quadratic programming:
           Error in quadprog::solve.QP(Dmat = Winv, dvec = d, Amat = t(R), bvec = rep(0,  : 
             constraints are inconsistent, no solution!


###########
# Features
###########

#Open
05/04/2011 R0 calculations as for twinstim:
           how can we derive R0 in a twinSIR model? (-> Michael)
07/08/2012 replace foodata analysis by hagelloch data in examples (-> Michael)

#Done
07/08/2012 animate using animation package for objects of type "epidata"



#======================================================================
#======================================================================
# twinstim
#======================================================================
#======================================================================

############
#Bug reports
############

#Open
04/09/2014 verify that isTRUE(all.equal(residuals(mysim1),
           surveillance:::residuals.twinstim(surveillance:::as.twinstim.simEpidataCS(mysim1))))

#Fixed
29/07/2010>> Summary/print fuer twinstim Objekte, die mit do.call
             erzeugt worden sind scheint nicht zu funktionieren.
             Siehe analyses-joint fuer Beispiele.
30/07/2010-fix>> alist
30/07/2010>> imdepi$events@data -- see email
30/07/2010>> Fitting twinstim models with epidemic component given by:
             epidemic=~ 0 -- see email.
10/08/2010 computing the cumulative intensity function at the end of
           the fit is VERY slow if model contains siaf component.  E.g. for best
           model having siaf_1 it takes about 60-90 minutes while the fit takes 5
           minutes. Possible to fix this??
16/04/2011 Use of finetune=TRUE appears not to lead to convergence. How to fix
           this? -> try with new argument nCub.adaptive=FALSE
xx/07/2012 R0 on an object containing agegrp as a factor variable
           in the epidemic component apparently does not work.
           -> new R0 implementation
07/08/2012 Simulate on a twinstim object without siaf (i.e. siaf=NULL)
      	   does not work. -> seems to work now after a bunch of bug fixes


##########
# Features
##########

# Feature requests
- Permutation test to evaluate importance of epidemic component
- as.epidataCS: "events" could be provided as an object of class ppx (which
  would include the window "W") or of class STIDF, then transform appropriately
  (but don't change "epidataCS" class definition).
  "stgrid" could be of class STFDF.
- allow for spatial "prehistory", i.e. events outside of W as possible sources
  in the epidemic component only, but otherwise not part of the likelihood
- update.epidataCS(): add or remove stgrid variables
- marks<-.epidataCS(,add=TRUE): to add marks
- allow for type-specific endemic effects, i.e. interaction with type. ideas:
use "special", or extra argument typeSpecificEffects=c("(Intercept)",
"influenza0"), ... maybe we can just use the classical formula interface (":")?
- plot.epidataCS (spatial): optional tiles and optional aggregation (-> snapshot)
- animate.epidataCS: allow more customization of points, not only col (e.g.,
  smaller cex of removed points), and support decreasing infectious point cex?
  To get a time slider (!), we could set up a Shiny app via animate(, shiny=TRUE)
    shiny::runApp(list(ui=pageWithSidebar(...), server=function(input,output)))
  with default input$epidataCS the 'object' (but this is probably overkill)

# Done
06/08/2010 (sebastian): Lambda(t) function, i.e. cumulative intensity function
12/08/2010 (sebastian): speed-up calculation of tau importantly by only evaluating .siafInt(siafpars) once
08/11/2010 (sebastian): Implementation of simulation algorithm
05/04/2011 (sebastian): Plot method for epidataCS objects
08/04/2011 (michael): Implemented profile function as in twinSIR.
05/07/2012 (sebastian): intensityPlot as in twinSIR, i.e. on W integrated intensity (and its components) as a function of time, grouped by type
xx/07/2012 (sebastian): robustification of optim procedure by making it less
adaptive (nCub.adaptive can be set to FALSE)
xx/07/2012 (sebastian): Documentation of functions in Rd files; also update references (Biometrics)
15/08/2012 (sebastian): added support for fixed parameters
10/12/2012 (sebastian): intensityplot-method for simEpidataCS passing by
                        twinstim() with all parameters fixed
11/05/2013 (sebastian): allow for use of rgeos instead of gpclib for polygon operations
13/02/2014 (sebastian): implement step function support for interaction kernels


#======================================================================
#======================================================================
# hhh4
#======================================================================
#======================================================================

#Done
- add documentation for oneStepAhead predictions/scores
- improve and document plot/predict methods
- remove redundant elements in control/stsObj/terms to reduce the
  size of ah4-objects
- add documentation for parametric neighbourhood weights


#======================================================================
#======================================================================
# outbreak detection
#======================================================================
#======================================================================
- Problem plot if populationFrac=proportion

#======================================================================
#======================================================================
# back-projection
#======================================================================
#======================================================================


#======================================================================
#======================================================================
# nowcast
#======================================================================
#======================================================================

#Open
26/07/2012 Estimation of delay function taking right-censoring into account

#Done
