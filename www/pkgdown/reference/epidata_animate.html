<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Function for the animation of epidemic data, i.e. objects inheriting from 
  class "epidata".  This only works with 1- or 2-dimensional coordinates 
  and is not useful if some individuals share the same coordinates 
  (overlapping).  There are two types of animation, see argument 
  time.spacing.  Besides the direct plotting in the R session, it is 
  also possible to generate a sequence of graphics files to create animations 
  outside R.'><title>Spatio-Temporal Animation of an Epidemic — epidata_animate • surveillance</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Spatio-Temporal Animation of an Epidemic — epidata_animate"><meta property="og:description" content='Function for the animation of epidemic data, i.e. objects inheriting from 
  class "epidata".  This only works with 1- or 2-dimensional coordinates 
  and is not useful if some individuals share the same coordinates 
  (overlapping).  There are two types of animation, see argument 
  time.spacing.  Besides the direct plotting in the R session, it is 
  also possible to generate a sequence of graphics files to create animations 
  outside R.'><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@bastistician"><meta name="twitter:site" content="@bastistician"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">surveillance</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.20.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/overview.html">Overview</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/events.html">Events</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/bibliography.html">Bibliography</a>
</li>
      </ul><ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Spatio-Temporal Animation of an Epidemic</h1>
      
      <div class="d-none name"><code>epidata_animate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function for the animation of epidemic data, i.e. objects inheriting from 
  class <code>"epidata"</code>.  This only works with 1- or 2-dimensional coordinates 
  and is not useful if some individuals share the same coordinates 
  (overlapping).  There are two types of animation, see argument 
  <code>time.spacing</code>.  Besides the direct plotting in the <span style="R">R</span> session, it is 
  also possible to generate a sequence of graphics files to create animations 
  outside <span style="R">R</span>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="co"># S3 method for summary.epidata</span>
<span class="fu"><a href="animate.html">animate</a></span><span class="op">(</span><span class="va">object</span>, main <span class="op">=</span> <span class="st">"An animation of the epidemic"</span>,
        pch <span class="op">=</span> <span class="fl">19</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html" class="external-link">gray</a></span><span class="op">(</span><span class="fl">0.6</span><span class="op">)</span><span class="op">)</span>, time.spacing <span class="op">=</span> <span class="cn">NULL</span>,
        sleep <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html" class="external-link">quote</a></span><span class="op">(</span><span class="fl">5</span><span class="op">/</span><span class="va">.nTimes</span><span class="op">)</span>, legend.opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, timer.opts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
        end <span class="op">=</span> <span class="cn">NULL</span>, generate.snapshots <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for epidata</span>
<span class="fu"><a href="animate.html">animate</a></span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>an object inheriting from class <code>"epidata"</code> or
    <code>"summary.epidata"</code>.  In the former case, its summary is calculated
    and the function continues as in the latter case, passing all <code>...</code>
    arguments to the <code>summary.epidata</code> method.</p></dd>
<dt>main</dt>
<dd><p>a main title for the plot, see also <code><a href="https://rdrr.io/r/graphics/title.html" class="external-link">title</a></code>.</p></dd>
<dt>pch, col</dt>
<dd><p>vectors of length 3 specifying the point symbols and colors for
    susceptible, infectious and removed individuals (in this order).
    The vectors are recycled if necessary.
    By default, susceptible individuals are marked as filled green circles,
    infectious individuals as filled red circles and removed individuals as
    filled gray circles.  Note that the symbols are iteratively drawn
    (overlayed) in the same plotting region as time proceeds.
    For information about the possible values of <code>pch</code> and <code>col</code>, see
    the help pages of <code><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></code> and <code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></code>, respectively.</p></dd>
<dt>time.spacing</dt>
<dd><p>time interval for the animation steps.  If <code>NULL</code> (the default), the
    events are plotted one by one with pauses of <code>sleep</code> seconds.  Thus, 
    it is just the <em>ordering</em> of the events, which is shown.  To plot
    the appearance of events proportionally to the exact time line,
    <code>time.spacing</code> can be set to a numeric value indicating the period of
    time between consecutive plots.  Then, for each time point in
    <code>seq(0, end, by = time.spacing)</code> the current state of the epidemic can
    be seen and an additional timer indicates the current time
    (see <code>timer.opts</code> below).  The argument <code>sleep</code> will be the
    artificial pause in seconds between two of those time points.</p></dd>
<dt>sleep</dt>
<dd><p>time in seconds to <code><a href="https://rdrr.io/r/base/Sys.sleep.html" class="external-link">Sys.sleep</a></code> before the next plotting
    event.  By default, each artificial pause is of length <code>5/.nTimes</code>
    seconds, where <code>.nTimes</code> is the number of events (infections and
    removals) of the epidemic, which is evaluated in the function body.
    Thus, for <code>time.spacing = NULL</code> the animation has a duration of
    approximately 5 seconds. In the other case, <code>sleep</code> is the duration of
    the artificial pause between two time points.
    Note that <code>sleep</code> is ignored on non-interactive devices
    (see <code><a href="https://rdrr.io/r/grDevices/dev.interactive.html" class="external-link">dev.interactive</a></code>)</p></dd>
<dt>legend.opts</dt>
<dd><p>either a list of arguments passed to the <code><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></code> function or
    <code>NULL</code> (or <code>NA</code>), in which case no legend will be plotted.  All 
    necessary arguments have sensible defaults and need not be specified, i.e.</p><dl><dt><code>x</code>:</dt>
<dd><p><code>"topright"</code></p></dd>

      <dt><code>legend</code>:</dt>
<dd><p><code>c("susceptible", "infectious", "removed")</code></p></dd>

      <dt><code>pch</code>:</dt>
<dd><p>same as argument <code>pch</code> of the main function</p></dd>

      <dt><code>col</code>:</dt>
<dd><p>same as argument <code>col</code> of the main function</p></dd>

    
</dl><p></p></dd>
<dt>timer.opts</dt>
<dd><p>either a list of arguments passed to the <code><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></code> function or
    <code>NULL</code> (or <code>NA</code>), in which case no timer will be plotted.  All 
    necessary arguments have sensible defaults and need not be specified, i.e.</p><dl><dt><code>x</code>:</dt>
<dd><p><code>"bottomright"</code></p></dd>

      <dt><code>title</code>:</dt>
<dd><p><code>"time"</code></p></dd>

      <dt><code>box.lty</code>:</dt>
<dd><p><code>0</code></p></dd>

      <dt><code>adj</code>:</dt>
<dd><p><code>c(0.5,0.5)</code></p></dd>

      <dt><code>inset</code>:</dt>
<dd><p><code>0.01</code></p></dd>

      <dt><code>bg</code>:</dt>
<dd><p><code>"white"</code></p></dd>

    
</dl><p>Note that the argument <code>legend</code>, which is the current time of the
    animation, can not be modified.</p></dd>
<dt>end</dt>
<dd><p>ending time of the animation in case of <code>time.spacing</code> not being
    <code>NULL</code>.  By default (<code>NULL</code>), time stops after the last event.</p></dd>
<dt>generate.snapshots</dt>
<dd><p>By default (<code>NULL</code>), the animation is not saved to image files
    but only shown on the on-screen device. In order to print to files,
    <code>time.spacing</code> must not be <code>NULL</code>, a screen device must be
    available, and there are two options:<br>
    If the framework of the <span class="pkg">animation</span> package
    should be used, i.e. the <code>animate</code>-call is passed as the
    <code>expr</code> argument to one of the <code>save*</code> functions of the
    <span class="pkg">animation</span> package, then set
    <code>generate.snapshots = img.name</code>, where <code>img.name</code> is the
    base name for the generated images (the same as passed to the
    <code>save*</code> function). The path and format (type, width, height)
    for the generated images is derived from
    <code><a href="https://rdrr.io/pkg/animation/man/ani.options.html" class="external-link">ani.options</a></code>. See the last example below.<br>
    Alternatively, <code>generate.snapshots</code> may be a list of arguments
    passed to the function <code><a href="https://rdrr.io/r/grDevices/dev2.html" class="external-link">dev.print</a></code>, which then is
    executed at each time point of the grid defined by
    <code>time.spacing</code>.  Essentially, this is used for 
    saving the produced snapshots to files, e.g.</p>
<p><code>generate.snapshots = <!-- % -->
    list(device=pdf, file=quote(paste("epidemic_",sprintf(form,tp),".pdf",<!-- % -->
    sep="")))</code></p>
<p>will store the animation steps in pdf-files in the current
    working directory, where the file names each end with the time point
    represented by the corresponding plot.  Because the variables <code>tp</code>
    and <code>form</code> should only be evaluated inside the function the
    <code>file</code> argument is <code>quote</code>d. Alternatively, the file name
    could also make use of the internal plot index <code>i</code>, e.g., use
    <code>file=quote(paste("epidemic",i,".pdf",sep=""))</code>.</p></dd>
<dt>...</dt>
<dd><p>further graphical parameters passed to the basic call of <code>plot</code>, e.g.
    <code>las</code>, <code>cex.axis</code> (etc.) and <code>mgp</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Sebastian Meyer</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="epidata_summary.html">summary.epidata</a></code> for the data, on which the plot is based.
<code><a href="epidata_plot.html">plot.epidata</a></code> for plotting the evolution of an epidemic by
the numbers of susceptible, infectious and removed individuals.</p>
<p>The contributed <span style="R">R</span> package <span class="pkg">animation</span>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"hagelloch"</span><span class="op">)</span>
<span class="op">(</span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">hagelloch</span><span class="op">)</span><span class="op">)</span>

<span class="co"># plot the ordering of the events only</span>
<span class="fu"><a href="animate.html">animate</a></span><span class="op">(</span><span class="va">s</span><span class="op">)</span>   <span class="co"># or: animate(hagelloch)</span>

<span class="co"># with timer (animate only up to t=10)</span>
<span class="fu"><a href="animate.html">animate</a></span><span class="op">(</span><span class="va">s</span>, time.spacing<span class="op">=</span><span class="fl">0.1</span>, end<span class="op">=</span><span class="fl">10</span>, sleep<span class="op">=</span><span class="fl">0.01</span>,
        legend.opts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"topleft"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Such an animation can be saved in various ways using tools of</span>
<span class="co"># the animation package, e.g., saveHTML()</span>
<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://yihui.org/animation/" class="external-link">"animation"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">oldwd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="co"># to not clutter up the current working dir</span>
  <span class="fu"><a href="https://rdrr.io/pkg/animation/man/saveHTML.html" class="external-link">saveHTML</a></span><span class="op">(</span><span class="op">{</span>
    <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>bg<span class="op">=</span><span class="st">"white"</span><span class="op">)</span>  <span class="co"># default "transparent" is grey in some browsers</span>
    <span class="fu"><a href="animate.html">animate</a></span><span class="op">(</span><span class="va">s</span>, time.spacing<span class="op">=</span><span class="fl">1</span>, sleep<span class="op">=</span><span class="fl">0</span>, legend.opts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x<span class="op">=</span><span class="st">"topleft"</span><span class="op">)</span>,
            generate.snapshots<span class="op">=</span><span class="st">"epiani"</span><span class="op">)</span>
  <span class="op">}</span>, use.dev<span class="op">=</span><span class="cn">FALSE</span>, img.name<span class="op">=</span><span class="st">"epiani"</span>, ani.width<span class="op">=</span><span class="fl">600</span>, interval<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd</a></span><span class="op">(</span><span class="va">oldwd</span><span class="op">)</span>
<span class="op">}</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Maintained by <a href="http://www.imbe.med.uni-erlangen.de/cms/sebastian_meyer.html" class="external-link">Sebastian Meyer</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000. Hosted on <a href="https://R-forge.R-project.org/projects/surveillance/" class="external-link"><img src="https://r-forge.r-project.org/themes/rforge/imagesrf/logo.png" height="18" alt="R-Forge"></a></p>
</div>

    </footer></div>

  

  </body></html>

