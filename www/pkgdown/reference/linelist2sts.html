<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The function is used to convert an individual line list of cases to an
  aggregated time series of counts based on event date information of the cases."><title>Convert Dates of Individual Case Reports into a Time Series of Counts — linelist2sts • surveillance</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert Dates of Individual Case Reports into a Time Series of Counts — linelist2sts"><meta property="og:description" content="The function is used to convert an individual line list of cases to an
  aggregated time series of counts based on event date information of the cases."><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@bastistician"><meta name="twitter:site" content="@bastistician"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">surveillance</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.22.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/overview.html">Overview</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/events.html">Events</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/pkgdown/bibliography.html">Bibliography</a>
</li>
      </ul><ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Convert Dates of Individual Case Reports into a Time Series of Counts</h1>
      
      <div class="d-none name"><code>linelist2sts.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The function is used to convert an individual line list of cases to an
  aggregated time series of counts based on event date information of the cases.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">linelist2sts</span><span class="op">(</span><span class="va">linelist</span>,<span class="va">dateCol</span>,</span>
<span>              aggregate.by<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1 day"</span>, <span class="st">"1 week"</span>, <span class="st">"7 day"</span>, <span class="st">"1 week"</span>,</span>
<span><span class="st">"1 month"</span>,  <span class="st">"3 month"</span>, <span class="st">"1 year"</span><span class="op">)</span>,</span>
<span>              dRange<span class="op">=</span><span class="cn">NULL</span>,</span>
<span>              epochInPeriodStr<span class="op">=</span><span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span><span class="va">aggregate.by</span>, <span class="st">"1 day"</span><span class="op">=</span><span class="st">"1"</span>,</span>
<span><span class="st">"1 week"</span><span class="op">=</span><span class="st">"%u"</span>, <span class="st">"1 month"</span><span class="op">=</span><span class="st">"%d"</span>,<span class="st">"3 month"</span><span class="op">=</span><span class="st">"%q"</span>,<span class="st">"1 year"</span><span class="op">=</span><span class="st">"%j"</span><span class="op">)</span>,</span>
<span>              startYearFormat<span class="op">=</span><span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span><span class="va">aggregate.by</span>,<span class="st">"1 day"</span><span class="op">=</span><span class="st">"%Y"</span>,</span>
<span><span class="st">"7 day"</span><span class="op">=</span><span class="st">"%G"</span>, <span class="st">"1 week"</span><span class="op">=</span><span class="st">"%G"</span>,<span class="st">"1 month"</span><span class="op">=</span><span class="st">"%Y"</span>,<span class="st">"3 month"</span><span class="op">=</span><span class="st">"%Y"</span>,<span class="st">"1 year"</span><span class="op">=</span><span class="st">"%Y"</span><span class="op">)</span>,</span>
<span>              startEpochFormat<span class="op">=</span><span class="kw"><a href="https://rdrr.io/r/base/switch.html" class="external-link">switch</a></span><span class="op">(</span><span class="va">aggregate.by</span>,<span class="st">"1 day"</span><span class="op">=</span><span class="st">"%j"</span>,</span>
<span><span class="st">"7 day"</span><span class="op">=</span><span class="st">"%V"</span>, <span class="st">"1 week"</span><span class="op">=</span><span class="st">"%V"</span>, <span class="st">"1 month"</span><span class="op">=</span><span class="st">"%m"</span>, <span class="st">"3 month"</span><span class="op">=</span><span class="st">"%Q"</span>, <span class="st">"1 year"</span><span class="op">=</span><span class="st">"1"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>linelist</dt>
<dd><p>A <code>data.frame</code> containing the line list of cases.</p></dd>

  <dt>dateCol</dt>
<dd><p>A character string stating the column name in
    <code>linelist</code> which contains the event occurrence information (as a
    vector of <code>Date</code>s) which are to be temporally aggregated.</p></dd>

  <dt>aggregate.by</dt>
<dd><p>Temporal aggregation level given as a string, see
  the <code>by</code> variable of the <code><a href="https://rdrr.io/r/base/seq.Date.html" class="external-link">seq.Date</a></code> function for
  further details.</p></dd>

  <dt>dRange</dt>
<dd><p>A vector containing the minimum and maximum date
    for doing the aggregation. If not specified these dates are
    extracted automatically by taking <code>range(D[,dateCol])</code> and
    adjust these according to <code>aggregate.by</code> (e.g. always first of
    a month).</p></dd>

  <dt>epochInPeriodStr</dt>
<dd><p><code>strptime</code> compatible format string to use for
    determining how a date is placed within the epoch. This is, e.g.,
    used to move the <code>dRange</code> epochs to the beginning of the
    period. Example: In case of weekly aggregation the "%u" determines
    which day within the week (Monday is day 1) we have. See
    <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></code> for further details.</p></dd>

  <dt>startYearFormat</dt>
<dd><p><code>strptime</code> compatible format string to use for
    determining how the <code>start</code> entry of the <code>sts</code> object is
    generated. Usually the provided defaults are sufficient.</p></dd>

  <dt>startEpochFormat</dt>
<dd><p><code>strptime</code> compatible format string to use for
    determining how the <code>start</code> entry of the <code>sts</code> object is
    generated. Usually the provided defaults are sufficient.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The date range is automatically extended such that the starting and
  ending dates are always the first epoch within the period, i.e. for
  aggregation by week it is moved to Mondays. This is controlled by the
  <code>epochInPeriodStr</code> parameter.</p>
<p>Please note that the formatting strings are implemented by the
  <code><a href="formatDate.html">formatDate</a></code> function, which uses <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></code>
  formatting strings as well as
  formatting of quarters via "%Q", "%OQ" and "%q".</p>
    </div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The function returns an object of class <code>"<a href="sts-class.html">sts</a>"</code>.
  The <code>freq</code> slot might not be appropriate.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Michael Höhle</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/base/seq.Date.html" class="external-link">seq.Date</a></code>, <code><a href="https://rdrr.io/r/base/strptime.html" class="external-link">strptime</a></code>, <code><a href="formatDate.html">formatDate</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="co">#Load O104 outbreak data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"husO104Hosp"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Convert line list to an sts object</span></span>
<span><span class="va">sts</span> <span class="op">&lt;-</span> <span class="fu">linelist2sts</span><span class="op">(</span><span class="va">husO104Hosp</span>, dateCol<span class="op">=</span><span class="st">"dHosp"</span>, aggregate.by<span class="op">=</span><span class="st">"1 day"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Check that the number of cases is correct</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/all.equal-methods.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="stsSlots.html">observed</a></span><span class="op">(</span><span class="va">sts</span><span class="op">)</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">husO104Hosp</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Plot the result</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sts</span>,xaxis.tickFreq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"%d"</span><span class="op">=</span><span class="va">atChange</span>,<span class="st">"%m"</span><span class="op">=</span><span class="va">atChange</span><span class="op">)</span>,</span>
<span>           xaxis.labelFreq<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"%d"</span><span class="op">=</span><span class="va">at2ndChange</span><span class="op">)</span>,</span>
<span>           xaxis.labelFormat<span class="op">=</span><span class="st">"%d %b"</span>,</span>
<span>           xlab<span class="op">=</span><span class="st">""</span>,las<span class="op">=</span><span class="fl">2</span>,cex.axis<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Maintained by <a href="https://www.imbe.med.fau.de/person/sebastian-meyer" class="external-link">Sebastian Meyer</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000. Hosted on <a href="https://R-forge.R-project.org/projects/surveillance/" class="external-link"><img src="https://r-forge.r-project.org/themes/rforge/imagesrf/logo.png" height="18" alt="R-Forge"></a></p>
</div>

    </footer></div>

  

  </body></html>

